import{h}from"../contentplayer.core.js";import{a as SlideState}from"./chunk-1fc3cad0.js";var PlayState;!function(t){t[t.STOP=0]="STOP",t[t.PLAYING=1]="PLAYING"}(PlayState||(PlayState={}));var VideoTag=function(){function t(){var t=this;this.videoObject={top:100,left:0,width:100,height:100,zIndex:1,src:"http://media.w3.org/2010/05/sintel/trailer.webm"},this.originX="top",this.originY="left",this.angle=0,this.scaleX=1,this.scaleY=1,this.alreadyEnded=!0,this.playState=PlayState.STOP,this.play=function(){var e=t.el.querySelector("video");e&&t.playState===PlayState.STOP&&(t.playState=PlayState.PLAYING,e.addEventListener("ended",t.ended),e.play())},this.ended=function(){var e=t.el.querySelector("video");if(t.playState===PlayState.PLAYING){t.playState=PlayState.STOP,e.removeEventListener("ended",t.ended);var a=new Event("VIDEO_CONTENT_ENDED");window.dispatchEvent(a)}}}return t.prototype.init=function(t){try{Object.assign(this,Object.assign({},t))}catch(t){console.log(t.message)}},t.prototype.changeStyle=function(t){try{Object.assign(this,Object.assign({},t))}catch(t){console.log(t.message)}},t.prototype.checkSlideState=function(t,e){if(e===SlideState.SHOW&&t===SlideState.START_ANIMATION&&(this.el.querySelector("video").currentTime=0,this.play()),e!==t)switch(t){case SlideState.SHOW:this.play();break;case SlideState.HIDE:this.playState=PlayState.STOP,this.el.querySelector("video").currentTime=0,this.el.querySelector("video").removeEventListener("ended",this.ended)}},t.prototype.componentWillLoad=function(){console.log("this",this),this.init(this.videoObject),this.changeStyle(this.adjustment)},t.prototype.componentDidLoad=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.render=function(){return console.log("src",this.src),this.src?(console.log("video-tag adj",this),h("div",{class:"video-wrapper",style:{top:this.top/this.containerHeight*100+"%",left:this.left/this.containerWidth*100+"%",width:this.adjustment.width,height:this.adjustment.height,transform:"rotate("+this.angle+"deg)","transform-origin":this.originX+" "+this.originY,zIndex:""+this.zIndex}},h("div",{class:"video-helper"},h("video",{src:this.src,autoplay:this.autoplay,loop:this.loop,muted:!0})))):null},Object.defineProperty(t,"is",{get:function(){return"video-tag"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{adjustment:{type:"Any",attr:"adjustment",watchCallbacks:["changeStyle"]},angle:{type:Number,attr:"angle",mutable:!0},autoplay:{type:Boolean,attr:"autoplay",mutable:!0},containerHeight:{type:Number,attr:"container-height",mutable:!0},containerWidth:{type:Number,attr:"container-width",mutable:!0},el:{elementRef:!0},height:{type:Number,attr:"height",mutable:!0},left:{type:Number,attr:"left",mutable:!0},loop:{type:Boolean,attr:"loop",mutable:!0},originX:{type:String,attr:"origin-x",mutable:!0},originY:{type:String,attr:"origin-y",mutable:!0},scaleX:{type:Number,attr:"scale-x",mutable:!0},scaleY:{type:Number,attr:"scale-y",mutable:!0},slideState:{type:Number,attr:"slide-state",mutable:!0,watchCallbacks:["checkSlideState"]},src:{type:String,attr:"src",mutable:!0},top:{type:Number,attr:"top",mutable:!0},videoObject:{type:"Any",attr:"video-object",watchCallbacks:["init"]},width:{type:Number,attr:"width",mutable:!0},zIndex:{type:Number,attr:"z-index",mutable:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"video-tag div.video-wrapper{display:block;position:absolute;background-color:#1e1e1e}video-tag div.video-wrapper .video-helper{position:relative;height:100%;padding-left:100%}video-tag .video-helper video{position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:fill;object-fit:fill}"},enumerable:!0,configurable:!0}),t}();export{VideoTag};